# 
# Cookbook Name:: web_apache
#
# Copyright RightScale, Inc. All rights reserved.  All access and use subject to the
# RightScale Terms of Service available at http://www.rightscale.com/terms.php and,
# if applicable, other agreements such as a RightScale Master Subscription Agreement.
# 
# Managed by RightScale
# DO NOT EDIT BY HAND
#

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Redirects to a maintenance page if the specified file below exists
  # ...but it still allows images to be served
  RewriteCond <%= node[:web_apache][:maintenance_file] %> -f
  RewriteCond %{SCRIPT_FILENAME} !/system/maintenance.html
  RewriteCond %{SCRIPT_FILENAME} !^(.+).(gif|png|jpg|css|js|swf)$
  RewriteRule ^.*$ <%= node[:web_apache][:maintenance_file] %> [L]
</IfModule>
